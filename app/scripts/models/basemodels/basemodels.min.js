var Article=function(n){n=n||{};var t=this;this.id=n.id||0;this.description=n.description||"";this.unitOfMeasure=n.unitOfMeasure||"";this.priceUnitConversion=n.priceUnitConversion||0;this.unitPrice=n.unitPrice||0;this.unitCost=n.unitCost||0;this.isStructure=n.isStructure||!1;this.workflowId=n.workflowId||0;this.strucuturedArticles=n.strucuturedArticles||[];this._workflow},Workflowfielddata,Workorder;Article.prototype.workflow=function(){return this.workflow.id||(this._workflow=appCache.workflows.getById(this.workflowId)),this._workflow};var Certification=function(n){n=n||{};var t=this;this.id=n.id||0;this.name=n.name||"";this.checklistPath=n.checklistPath||"";this.certNumber=n.certNumber||""},Customer=function(n){var t=this;n=n||{};n.customerContacts=n.customerContacts||[];t.id=n.id||0;t.name=n.name||"";t.address=n.address||"";t.address2=n.address2||"";t.city=n.city||"";t.zip=n.zip||"";t.vatNumber=n.vatNumber||"";t.contacts=n.contacts||[];t.initContacts=function(){if(n.customerContacts.length>0&&n.customerContacts.forEach(function(n){t.contacts.push(new CustomerContact(n))}),t.contacts.length>0){var i=[];t.contacts.forEach(function(n){i.push(new CustomerContact(n))});t.contacts=i}}()},CustomerContact=function(n){var t=this;n=n||{};t.id=n.id||null;t.firstname=n.firstname||"";t.lastname=n.lastname||"";t.active=n.active||!0;t.phone=n.phone||"";t.email=n.email||"";t.cellphone=n.cellphone||""},OrderListItem=function(n){var t=riot.observable(this);t.id=n.id||0;t.description=n.description||"";t.customerId=n.customerId||0;t.userGroupId=n.userGroupId||0;t.lockedBy=n.lockedBy||null;t.criticalDelivery=n.criticalDelivery||!1;t.criticalDeliveryNote=n.criticalDeliveryNote||"";t.currentWorkflow=n.currentWorkflow||"";t.productionWeek=n.productionWeek||null;t.productionResourceId=n.productionResourceId||0;t.invoicingId=n.invoicingId||0;t.createdById=n.createdById||0;t.productId=n.productId||0;t.customer={};t.company={};t.productionResource={};t.createdBy={};t.product={};t.invoicingBy={};t.setProperty=function(n,i,r){var u=_.find(appCache.getCacheItem(n),function(n){return n.id==t[r]});u=="undefined"&&(u={});t[i]=u};t.referenceCacheObjects=function(){t.setProperty("Customers","customer","customerId");t.setProperty("Users","createdBy","createdById");t.setProperty("Users","invoicingBy","invoicingId");t.setProperty("Products","product","productId");t.setProperty("Usergroups","company","userGroupId");t.setProperty("ProductionResources","productionResource","productionResourceId")}()},OrderSavedata=function(n){var t=riot.observable(this);n=n||{};t.owfId=n.owfId||null;t.wffinwfId=n.wffinwfId||null;t.savedata=n.savedata||null},Orderworkflow=function(n){var t=riot.observable(this);n=n||{};t.statuses=["Null","Ej påbörjad","Påbörjad","Avslutad"];t.id=n.id||0;t.orderId=n.orderId||0;t.workflowId=n.workflowId||0;t.workflow={};t.articleId=n.articleId||null;t.article={};t.savedata=[];t.sortorder=n.sortorder||0;t.workflowstatusId=n.workflowstatusId||0;t.workstartedAt=n.workstartedAt||null;t.workEndedAt=n.workEndedAt||null;t.expanded=n.expanded||!1;t.previousWfHasToBeCompleted=n.previousWfHasToBeCompleted||!0;t.showOnDeliveryNote=n.showOnDeliveryNote||!1;t.workflowStatus=function(){return t.statuses[t.workflowstatusId]};t.setProperty=function(n,i,r){if(!t[r])return null;var u=_.find(appCache.getCacheItem(n),function(n){return n.id==t[r]});u=="undefined"&&(u={});t[i]=u};t.initSaveData=function(){n.savedata&&(t.savedata=[],n.savedata.forEach(function(n){t.savedata.push(new OrderSavedata(n))}))};t.referenceCacheObjects=function(){t.initSaveData();var i=_.find(appCache.getCacheItem("Workflows"),function(n){return n.id==t.workflowId}),n=new Workflow(i);n.workflowfields.forEach(function(n){var i=_.find(t.savedata,function(t){return t.wffinwfId==n.id});i&&(n.displayValue=i.savedata)});t.workflow=n;t.setProperty("Articles","article","articleId")}();t.loadSaveData=function(){$.ajax({url:"http://ao2010.agrenshuset.se/api/saveddatas/",data:{owfid:t.id},type:"GET",headers:n.headers||{},success:function(n){t.savedata=[];n.forEach(function(n){t.savedata.push(new OrderSavedata(n))});t.trigger("savedataUpdated")}})};t.on("savedataUpdated",function(){})},Paper=function(n){var t=this;n=n||{};this.id=n.id||0;this.paperNameId=n.paperNameId||0;this.paperSheetFormatId=n.paperSheetFormatId||0;this.paperWeightId=n.paperWeightId||0},Product=function(n){n=n||{};var t=this;this.id=n.id||0;this.description=n.description||"";this.unitOfMeasure=n.unitOfMeasure||"";this.priceUnitConversion=n.priceUnitConversion||0;this.unitPrice=n.unitPrice||0;this.unitCost=n.unitCost||0;this.isStructure=n.isStructure||!0;this.workflowId=n.workflowId||0;this.strucuturedArticles=n.strucuturedArticles||[];this._subArticles=[];this._workflow};Product.prototype.workflow=function(){return this.workflow.id||(this._workflow=appCache.workflows.getById(this.workflowId)),this._workflow};Product.prototype.articles=function(){var n=[];return this.strucuturedArticles.length<=0?n:(this.strucuturedArticles.forEach(function(t){n.push(_.find(appCache.cachedItems.Articles,function(n){return n.id==t}))}),n)};var ProductionResource=function(n){var t=riot.observable(this);n=n||{};this.id=n.id||0;this.name=n.name||"";this.companyId=n.companyId||0;this.costPerUnit=n.costPerUnit||0;this.startCost=n.startCost||0},User=function(n){n=n||{};var t=riot.observable(this);this.id=n.id||0;this.firstname=n.firstname||"";this.lastname=n.lastname||"";this.username=n.username||"";this.email=n.email||"";this.phone=n.phone||"";this.active=n.active||!1;this.userGroup=n.userGroup||null;this.value=n.firstname+" "+n.lastname;t.fullname=function(){return t.firstname+" "+t.lastname}},Usergroup=function(n){n=n||{};var t=this;this.id=n.id||0;this.name=n.name||"";this.parentgroupId=n.parentgroup||null;this.active=n.active||!0},Workflow=function(n){n=n||{};var t=this;this.id=n.id||0;this.active=n.active||!0;this.alwaysFolded=n.alwaysFolded||!1;this.description=n.description||"";this.displayOnInvoice=n.displayOnInvoice||!1;this.workflowCertificationMessages=n.workflowCertificationMessages||[];this.workflowColor=n.workflowColor||"";this.workflowfields=[];this.name=n.name||"";this.cssClass=n.cssClass||"";this.initWorkflowFields=function(){for(var i in n.workflowfields)t.workflowfields.push(new Workflowfield(n.workflowfields[i]))}()},Workflowfield=function(n){n=n||{};var t=riot.observable(this);t.id=n.id||0;t.fieldId=n.fieldId||0;t.label=n.label||"";t.tooltip=n.tooltip||"";t.mandatory=n.mandatory||!1;t.sortOrder=n.sortOrder||0;t.showInPopup=n.showInPopup||!1;t.typeId=n.typeId||1;t.value=n.value||"";t.displayValue=n.displayValue||"";t.optionsList=[];t.initOptions=function(){n.optionsList.forEach(function(n){t.optionsList.push(n)})}()};Workflowfield.prototype.typeName=function(){return this.typeId==1?"text":this.typeId==2?"number":this.typeId==3?"decimal":this.typeId==4?"date":this.typeId==5?"dropdown":this.typeId==6?"list":this.typeId==7?"textarea":this.typeId==8?"checkbox":this.typeId==9?"paper":this.typeId==18?"placeholder":"text"};Workflowfielddata=function(n){n=n||{};var t=riot.observable(this);t.id=n.id||0;t.data=n.data||"";t.sortOrder=n.sortOrder||0;t.active=n.active||!1};Workorder=function(n){var t=riot.observable(this);n=n||{};t.statuses=["Nollad","Ej påbörjad","Påbörjad","Avslutad"];t.statusClass=["notUsed","orderNotStarted","orderStarted","orderFinished"];t.id=n.id||0;t.description=n.description||"";t.desiredDelivery=n.desiredDelivery?new Date(n.desiredDelivery):(new Date).addDays(10);t.orderStatus=n.orderStatus||null;t.status=function(){return t.statuses[t.orderStatus]};t.cssClass=function(){return t.isInvoiced==!1&&t.desiredDelivery<(new Date).addDays(-5)?"orderNotinvoiced":t.desiredDelivery<(new Date).addDays(-4)?"orderNotdelivered":t.statusClass[t.orderStatus]};t.productionWeek=n.productionWeek||null;t.productionYear=n.productionYear||null;t.customerId=n.customerId||null;t.customer={};t.invoiceCustomerId=n.invoiceCustomerId||null;t.invoiceCustomer={};t.ordercontactId=n.ordercontactId||null;t.invoiceContactId=n.invoiceContactId||null;t.usergroupId=n.userGroupId||0;t.usergroup={};t.company={};t.lockedById=n.lockedById||null;t.lockedBy={};t.quoteCreatorId=n.quoteCreatorId||0;t.quoteCreator={};t.createdById=n.createdById||0;t.createdBy={};t.workStartedById=n.workStartedById||null;t.workStartedBy={};t.salesPersonId=n.salesPersonId||null;t.salesPerson={};t.customerManagerId=n.customerManagerId||null;t.customerManager={};t.criticalDelivery=n.criticalDelivery||!1;t.criticalDeliveryNote=n.criticalDeliveryNote||"";t.currentWorkflow=n.currentWorkflow||"";t.productionResourceId=n.productionResourceId||0;t.productionResource={};t.productId=n.productId||0;t.product={};t.isInvoiced=n.isInvoiced||!1;t.orderworkflows=n.orderworkflows||[];t.owfs=[];t.savedata=[];t.certifications=n.certifications||[];t.certificates={};t.files=n.files||[];t.setProperty=function(n,i,r){if(!t[r])return null;var u=_.find(window.appCache.getCacheItem(n),function(n){return n.id==t[r]});u=="undefined"&&(u={});t[i]=u};t.loadCertificates=function(){t.certifications.forEach(function(n){var i=_.find(window.appCache.getCacheItem("Certifications"),function(t){return t.id==n});t.certificates[i.id]=i})}();t.loadOrderWorkflows=function(){$.ajax({url:"http://ao2010.agrenshuset.se/api/orderworkflows/",data:{orderId:t.id},type:"GET",headers:n.headers||{},success:function(n){t.owfs=[];n.forEach(function(n){var i=new Orderworkflow(n);t.owfs.push(i);i.loadSaveData()});t.trigger("workflowsloaded")}})};t.referenceCacheObjects=function(){t.setProperty("Usergroups","usergroup","usergroupId");t.setProperty("Products","product","productId");t.setProperty("Usergroups","company","userGroupId");t.setProperty("ProductionResources","productionResource","productionResourceId");t.statusClass=t.cssClass();t.formattedDelivery=t.desiredDelivery.format("yyyy-mm-dd");t.trigger("cacheProperties:ready")}()};
/*
//# sourceMappingURL=basemodels.min.js.map
*/